create database QLSV_DKMH;
use QLSV_DKMH;
go

CREATE TABLE KHOA (
    MSKHOA VARCHAR(10) PRIMARY KEY,
    TENKHOA NVARCHAR(100) NOT NULL
);

CREATE TABLE GIANGVIEN(
    MSGV VARCHAR(10) PRIMARY KEY,
    HOTENGV NVARCHAR(200) NOT NULL,
    EMAIL VARCHAR(100) NOT NULL,
    PHONE VARCHAR(20) NOT NULL,
    DIACHI VARCHAR(900) NOT NULL
);
CREATE TABLE SINHVIEN (
    MSSV VARCHAR(10) PRIMARY KEY,
    HOTENSV NVARCHAR(100) NOT NULL,
	LOP VARCHAR(10) NOT NULL,
    NGAYSINH DATE NOT NULL,
    PHAI BIT NOT NULL,
	EMAIL VARCHAR(100) NOT NULL,
	PHONE VARCHAR(20) NOT NULL,
	DIACHI NVARCHAR(500) NOT NULL,
);
CREATE TABLE HOCPHAN(
	MAHP VARCHAR(10) PRIMARY KEY,
    TENHP NVARCHAR(100) NOT NULL,
    SOTC SMALLINT NOT NULL,
);
CREATE TABLE KETQUA(
	MSSV VARCHAR(10) NOT NULL,
    MAHP VARCHAR(10) NOT NULL,
    HOCKY SMALLINT NOT NULL,
	NAMHOC INT NOT NULL,
	DIEMBP DECIMAL(2,1) NOT NULL,
	DIEMGK DECIMAL(2,1) NOT NULL,
	DIEMKT DECIMAL(2,1) NOT NULL,
    FOREIGN KEY (MAHP) REFERENCES HOCPHAN(MAHP),
	FOREIGN KEY (MSSV) REFERENCES SINHVIEN(MSSV),
);

CREATE TABLE KHHT(
	MSKHOA VARCHAR(10) NOT NULL,
    MAHP VARCHAR(10) NOT NULL,
    TENHP NVARCHAR(100) NOT NULL,
	SOTC SMALLINT NOT NULL,
	HOCKY SMALLINT NOT NULL,
	NAMHOC INT NOT NULL,
    FOREIGN KEY (MAHP) REFERENCES HOCPHAN(MAHP),
	FOREIGN KEY (MSKHOA) REFERENCES KHOA(MSKHOA)
);
CREATE TABLE LICHHOC(
    MALH VARCHAR(20) PRIMARY KEY,
    MAHP VARCHAR(10) NOT NULL,
	BATDAU DATETIME NOT NULL,
	HOTENGV NVARCHAR(100) NOT NULL,
	THU VARCHAR(10) NOT NULL, 
	DIADIEM NVARCHAR(100) NOT NULL,	
	FOREIGN KEY (MAHP) REFERENCES HOCPHAN(MAHP)
);
CREATE TABLE DANGKY(
	MSGV VARCHAR(10) NOT NULL,
	LOP VARCHAR(10) NOT NULL,
    MSSV VARCHAR(10)NOT NULL,
    MALH VARCHAR(20) NOT NULL,
	TRANGTHAIDK VARCHAR(20) NOT NULL,
	SLSV_DADK INT NOT NULL,
	SLSV_DK_TOIDA INT NOT NULL,
	FOREIGN KEY (MSSV) REFERENCES SINHVIEN(MSSV),
    FOREIGN KEY (MALH) REFERENCES LICHHOC(MALH),
	FOREIGN KEY (MSGV) REFERENCES GIANGVIEN(MSGV),
);
drop table DANGKY;
drop table LICHHOC;
drop table KETQUA;
drop table KHHT;
drop table HOCPHAN;
drop table SINHVIEN;
drop table GIANGVIEN;
drop table KHOA;


insert into KHOA values
('CNTT',N'Công nghệ thông tin'),
('QTKD',N'Quản trị kinh doanh'),
('QTDL',N'Quản trị du lịch'),
('NNA',N'Ngôn ngữ anh'),
('CNXD',N'Công nghệ xây dựng'),
('CNTP',N'Công nghệ thực phẩm'),
('CNOT',N'Công nghệ ô tô')
insert into LOP values
('63.CNTT-1',N'Lớp 1','CNTT'),
('63.CNTT-2',N'Lớp 2','CNTT'),
('63.CNTT-3',N'Lớp 3','CNTT'),
('63.QTKD-1',N'Lớp 1','QTKD'),
('63.QTKD-2',N'Lớp 2','QTKD'),
('63.QTDL-1',N'Lớp 1','QTDL'),
('63.QTDL-2',N'Lớp 2','QTDL'),
('63.NNA-1',N'Lớp 1','NNA'),
('63.NNA-2',N'Lớp 2','NNA'),
('63.CNXD-1',N'Lớp 1','CNXD'),
('63.CNXD-2',N'Lớp 2','CNXD'),
('63.CNTP-1',N'Lớp 1','CNTP'),
('63.CNTP-2',N'Lớp 2','CNTP'),
('63.CNOT-1',N'Lớp 1','CNOT'),
('63.CNOT-2',N'Lớp 2','CNOT')
INSERT INTO MONHOC VALUES
('CNXHKH', N'Chủ nghĩa xã hội khoa học', 2),
('QTCSDL', N'Quản trị cơ sở dữ liệu', 3),
('LSD', N'Lịch sử đảng', 2),
('TTHCM', N'Tử tưởng hồ chí minh', 2),
('QTH', N'Quản trị học', 2),
('NNHT', N'Ngôn ngữ học thuật', 2),
('TDPB', N'Tư duy phản biện', 2)

INSERT INTO SINHVIEN VALUES
('63134535', N'Huỳnh Thanh Luân', '2003-06-30', 1, '63.CNTT-1'),
('63136237', N'Nguyễn Văn An', '2003-04-30', 1, '63.CNTT-2'),
('63134671', N'Trần Thị Mai Thơ', '2003-11-01', 0, '63.CNTT-3'),
('63134928', N'Lê Duy Quốc', '2003-01-09', 1, '63.CNXD-1'),
('63134715', N'Lê Quốc Duy', '2003-02-25', 1, '63.CNXD-2'),
('63145672', N'Nguyễn Thị Thu Thảo', '2003-03-19', 0, '63.NNA-1'),
('63147875', N'Trần Thị Thu Hà', '2003-05-13', 0, '63.NNA-2'),
('63134657', N'Trần Quốc Bảo', '2003-03-03', 1, '63.CNTP-2'),
('63134913', N'Nguyễn Văn Hậu', '2003-02-03', 1, '63.CNTP-1'),
('63130285', N'Phạm Thị Quỳnh Như', '2003-10-20', 0, '63.QTKD-1'),
('63131989', N'Phạm Văn Đồng', '2003-07-11', 1, '63.QTKD-2'),
('63134580', N'Nguyễn Thị Kim Hương', '2003-12-21', 0, '63.QTDL-1'),
('63133145', N'Phạm Tú Như', '2003-06-25', 0, '63.QTDL-2'),
('63131276', N'Lê Trọng Hậu', '2003-01-21', 0, '63.CNOT-1'),
('63134217', N'Lê Văn Luyện', '2003-01-21', 0, '63.CNOT-2')

INSERT INTO KETQUA  VALUES
('63134535', 'QTCSDL','9.5', 2, '2022-2023'),
('63134535', 'TTHCM','6.5', 2, '2022-2023'),
('63136237', 'TTHCM','4.2', 1, '2022-2023'),
('63136237', 'NNHT', '5.1',2, '2022-2023'),
('63134671', 'TTHCM','8.5', 1, '2022-2023'),
('63134671', 'QTCSDL','7.5',2, '2022-2023'),
('63134928', 'LSD','6.5' ,1, '2022-2023'),
('63134715', 'TTHCM','4.5', 1, '2022-2023'),
('63145672', 'TTHCM','6.5', 1, '2022-2023'),
('63147875', 'QTH','7.3', 2, '2022-2023'),
('63134657', 'CNXHKH','8.0', 2, '2022-2023'),
('63134913', 'TTHCM','5.2', 1, '2022-2023'),
('63130285', 'TTHCM','6.7', 1, '2022-2023'),
('63131989', 'LSD','8.1', 1, '2022-2023'),
('63134580', 'TTHCM','9.0', 1, '2022-2023'),
('63134580', 'LSD','9.7', 1, '2022-2023'),
('63133145', 'QTH','7.7', 2, '2022-2023'),
('63133145', 'NNHT','8.0', 2, '2022-2023'),
('63131276', 'NNHT','7.6', 2, '2022-2023'),
('63131276', 'TDPB','8.2', 1, '2022-2023'),
('63134217', 'TDPB','9.1', 1, '2022-2023'),
('63136237', 'QTH','5.8', 2, '2022-2023'),
('63134535', 'CNXHKH','4.5', 2, '2022-2023')

INSERT INTO GIAOVIEN VALUES
('GV001', N'Nguyễn Văn Hùng', 'CNTT'),
('GV002', N'Phạm Thị Thanh Thủy', 'QTKD'),
('GV003', N'Trần Quốc Tuấn', 'CNTP'),
('GV004', N'Nguyễn Thị Hoa', 'QTDL'),
('GV005', N'Huỳnh Thị Thu Thảo', 'QTKD'),
('GV006', N'Trần Văn Quốc', 'CNOT')

INSERT INTO GIANGDAY VALUES
('GV001', 'QTCSDL',2,'2022-2023'),
('GV002', 'QTH',2,'2022-2023'),
('GV003', 'LSD',1,'2022-2023'),
('GV004', 'TDPB',1,'2022-2023'),
('GV005', 'CNXHKH',2,'2022-2023'),
('GV006', 'TTHCM',2,'2022-2023'),
('GV006', 'NNHT',2,'2022-2023')